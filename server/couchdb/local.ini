; CouchDB Konfiguration für ExcaliNote
; Diese Datei wird in den Container gemountet

[couchdb]
; Einzelknoten-Setup (für kleinere Installationen)
single_node = true

[chttpd]
; Bind auf alle Interfaces im Container
bind_address = 0.0.0.0
port = 5984

; Maximale Dokumentgröße (100MB für Bilder in Notizen)
max_document_size = 104857600

; CORS für Browser-Zugriff
[cors]
origins = *
credentials = true
methods = GET, PUT, POST, HEAD, DELETE
headers = accept, authorization, content-type, origin, referer, x-csrf-token

[httpd]
enable_cors = true

; Authentifizierung
[chttpd_auth]
; Session-Timeout: 7 Tage
timeout = 604800

; Cookie-basierte Auth aktivieren
authentication_handlers = {chttpd_auth, cookie_authentication_handler}, {chttpd_auth, default_authentication_handler}

[couch_httpd_auth]
; Sichere Cookies
same_site = lax

; Komprimierung für bessere Performance
[attachments]
compression_level = 8
compressible_types = text/*, application/javascript, application/json, application/xml

; Replikation
[replicator]
; Parallele Replikations-Verbindungen
http_connections = 20
connection_timeout = 30000

; Logging
[log]
level = warning
